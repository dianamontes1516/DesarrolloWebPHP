create database escuela;
\c escuela;

begin;
create table persona(
       id char(18) primary key,
       nombre text not null,
       a_paterno text not null,
       a_materno text not null default ''
);

create table semestre(
       id serial primary key,
       nombre_semestre char(6) not null unique
);

create table profesor(
       num_trabajador integer primary key,
       fecha_ingreso date not null,
       id_persona char(18) not null references persona -- Llave foranea
);

create table alumno(
       num_cuenta char(9) primary key,
       id_semestre integer not null references semestre, -- En el formato aaaa-[1|2]. Ej: 2002-1
       id_persona char(18) not null references persona       
);

create table curso(
      clave text primary key,
      nombre_curso text not null
);

create table curso_profe(
       id serial primary key,
       id_semestre integer not null references semestre, 
       id_profesor integer not null references profesor,
       id_curso text not null references curso
);

create table salon(
       id serial primary key,
       nombre_salon text not null unique
);

create table curso_alumno(
       id_curso_prof integer not null references curso_profe, 
       id_alumno char(9) not null references alumno,
       unique(id_curso_prof, id_alumno)
);

create table salon_curso(
       id_curso_prof integer not null references curso_profe,
       id_salon integer not null references salon,
       horario daterange
);
commit;

--------- Tuplas prueba
begin;
insert into semestre values
('2017-1'),
('2016-2'),
('2016-1'),
('2015-2'),
('205-1'),
('2014-2');

insert into curso values
('0324','Animales 2'),
('2304','C치lculo 1'),
('1212','C치lculo 2'),
('5347','C치lculo 3'),
('0273','C치lculo 4'),
('1221','Pensiones 1'),
('3455','Animales 2'),
('0834','Plantas 1'),
('7324','Plantas 1');

insert into salon values
('Aula Magna 1, Tlahuiz, Piso 2'),
('Aula 123, Edificio P, Piso 1'),
('Aula 212, Edificio P, Piso 2');

CREATE OR REPLACE FUNCTION personas()


--Consultas:

